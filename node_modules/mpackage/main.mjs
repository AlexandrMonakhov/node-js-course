export default function(person) {
  const [firstName, lastName] = person.name.split(" ");

  const today = new Date();
  const dateBirth = new Date(person.dateBirth);
  const age = today.getFullYear() - dateBirth.getFullYear();
  const monthDiff = today.getMonth() - dateBirth.getMonth();

  if (
    monthDiff < 0 
    || (monthDiff === 0 && today.getDate() < dateBirth.getDate())
  ) {
    age--;
  }

  return {
    id: generateId(),
    firstName: firstLetterToUpperCase(firstName),
    lastName: firstLetterToUpperCase(lastName),
    dateBirth: person.dateBirth,
    age: String(age),
    purpose: firstLetterToUpperCase(person.purpose)
  }
}

function generateId() {
  return (Math.random() + 1).toString(36).substring(2)
}
function firstLetterToUpperCase(str) {
  return str[0].toUpperCase() + str.slice(1).toLowerCase()
}
